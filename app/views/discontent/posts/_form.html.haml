- content_for :discontent_form do
  = form_for @post, url: {project: @project.id, id: @post, action: @post.persisted? ? 'update' : 'create'}, remote: true, html: {id: 'new_discontent'} do |f|
    .col-md-12
      = render partial: 'shared/create_success', locals: {model_name: 'discontent'}
      .divider10
      .content_window.white
        .divider25
        .btn-group.cab_drop
          %a.dropdown-toggle#select_aspect{'data-toggle' => 'dropdown'}
            - if @post.post_aspects.empty?
              %span
                = t('form.discontent.select_aspect')
            - @post.post_aspects.each do |aspect|
              %span
                %span.color_counter.color_me{class: 'active', style: "background-color: #{aspect.color};"}
              %span.text_label
                = aspect.content

          %ul.dropdown-menu#list_aspects
            - @aspects.each do |aspect|
              %li
                = check_box_tag 'discontent_post_aspects[]', aspect.id, @post.post_aspects.include?(aspect), id: "discontent_post_aspects_#{aspect.id}"
                %label{for: "discontent_post_aspects_#{aspect.id}"}
                  %span
                    %span.color_counter.color_me{class: 'active', style: "background-color: #{aspect.color};"}
                  %span.text_label
                    = aspect.content

        .divider25
        %p
          = t('activerecord.attributes.discontent/post.content')
        = f.text_area :content, rows: 1, class: 'form-control'
        .divider15
        %p
          = t('activerecord.attributes.discontent/post.what')
        = f.text_area :what, rows: 2, class: 'form-control'
        .divider15
        %p
          = t('activerecord.attributes.discontent/post.whered')
        = f.text_area :whered, rows: 2, class: 'autocomplete form-control', 'data-url' => discontent_autocomplete_path(@project, field: 'whered')
        .divider15
        %p
          = t('activerecord.attributes.discontent/post.whend')
        = f.text_area :whend, rows: 2, class: 'autocomplete form-control', 'data-url' => discontent_autocomplete_path(@project, field: 'whend')
        .divider25
    .row
      .col-md-6
        - if @mechanic_type == 'simple'
          %a.theme_font_color.with_arrow.collapsed.not_full_width.bold.collapser_type1{'aria-expanded' => 'false', 'data-toggle' => 'collapse', href: '#imperfs1'}
            Пример несовершенства
            %i.fa.fa-chevron-circle-right.fa-lg.collapse_arrow
      .col-md-6
        %p
          = f.submit t("form.#{action_name}"), class: 'btn add-button type2 pull-right', id: 'send_post'
    .divider25
    #imperfs1.content_window.white.collapse.font_lighter_grey
      .divider15
      %a.with_arrow.collapsed.a_font_reset.not_full_width
        Невозможно дышать при большом количестве людей в комнате
      .divider25
      %p.font_dark_grey
        Название (краткое описание несовершенства)
      %p
        Текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст
      .divider15
      %p.font_dark_grey
        На каком этапе это происходит?
      %p
        Текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст
      .divider15
      %p.font_dark_grey
        От чего это зависит?
      %p
        Текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст
      .divider15
      %p.font_dark_grey
        Чья работа от этого зависит?
      %p
        Текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст текст
      .divider20
      .divider15

= render partial: "#{@mechanic_type}_form"
