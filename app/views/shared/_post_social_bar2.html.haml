.row
  .col-md-12
    .pull-right
      =post.number_views
      %span.glyphicon.glyphicon-eye-open
      |
      = link_to(:controller => post.class.name.underscore.pluralize, :action => :show, :project => @project, :id => post.id) do
        Комментировать
        =post.comments.count
        %span.glyphicon.glyphicon-comment
      -if boss? and @project.status == 6 and post.class.name.deconstantize == "Discontent"
        |
        %span.text-success За:
        =post.final_votings.by_positive.uniq_user.size
        |
        %span.text-danger Против:
        =post.final_votings.by_negative.uniq_user.size
        |
        %span.text-info Голосовавших:
        =@vote_all
        |
        =link_to({:controller => post.class.name.underscore.pluralize, :action => :set_required, :id => post.id, :project => @project},:remote => true,:method => :put,:id => "set_required_#{post.id}", :class => "note_text") do
          -if post.status == 4
            %span.text-success Добавлено
          -else
            %span.text-warning В обязательные
      -if boss? and @project.status == 8 and post.class.name.deconstantize == "Concept"
        |
        %span.text-success Голосов:
        =post.post_aspects.first.final_votings.by_dispost(post.dispost).size
        |
        %span.text-success Всего за пост:
        =post.post_aspects.first.final_votings.by_dispost(post.dispost).uniq_user.size
        |
        %span.text-info Голосовавших:
        =@vote_all
      -if boss? and @project.status == 11 and post.class.name.deconstantize == "Plan"
        |
        %span.text-success Голосов:
        =post.voted_users.size
        |
        %span.text-info Голосовавших:
        =@vote_all


      |
      - if boss?
        - if signed_in? and boss? and not post.users.include?(current_user)
          =link_to({:controller => post.class.name.underscore.pluralize ,:action => :plus, :project => @project,:status=>0, :aspect=>0,  :id => post.id, :against => false,  :remote => true},:method => :put, id: "plus_post_#{post.id}") do
            %span.text-success За
            %span.text-success(id="plus_counter_#{post.id}")=post.users_pro.count
            %span.glyphicon.glyphicon-thumbs-up.text-success
          -#=link_to({:controller => post.class.name.underscore.pluralize ,:action => :plus, :project => @project,:status=>0, :aspect=>0,  :id => post.id, :against => true, :remote => true}, :method => :put, id: "minus_post_#{post.id}") do
          -#  %span.text-danger Против
          -#  %span.text-danger(id="minus_counter_#{post.id}")=post.users_against.count
          -#  %span.glyphicon.glyphicon-thumbs-down.text-danger
        -else
          - if boss?
            =link_to({:controller => post.class.name.underscore.pluralize ,:action => :plus, :project => @project,:status=>0, :aspect=>0,  :id => post.id, :against => false,  :remote => true},:method => :put, id: "plus_post_#{post.id}") do
              %span.text-success
                %b За
              %span.text-success(id="plus_counter_#{post.id}")=post.users_pro.count
              %span.glyphicon.glyphicon-thumbs-up.text-success
            -#=link_to({:controller => post.class.name.underscore.pluralize ,:action => :plus, :project => @project,:status=>0, :aspect=>0,  :id => post.id, :against => true, :remote => true}, :method => :put, id: "minus_post_#{post.id}") do
            -#  %span.text-danger
            -#    %b Против
            -#  %span.text-danger(id="minus_counter_#{post.id}")=post.users_against.count
            -#  %span.glyphicon.glyphicon-thumbs-down.text-danger
          - else
            %span.text-muted= "За #{post.users_pro.count}"
            %span.glyphicon.glyphicon-thumbs-up.text-muted
            %span.text-muted= "Против #{post.users_against.count}"
            %span.glyphicon.glyphicon-thumbs-down.text-muted