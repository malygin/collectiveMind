- show_post||=:show
.wholePost
    = render 'users/user_post', :user => post.user
    .posts
        = render 'users/user_name', :user => post.user, :created_at => post.created_at
        - if not current_page?(url_for(params.merge(:project => @project, :id => post.id)))
            %p
                = trim_string(raw(post.content))
                - if post.attributes.has_key? 'aspect_id' and !post.aspect.nil?
                    %br
                    %b="#{post.aspect.content}  фрагмент"
                - if  post.instance_of? Question::Post
                    - if post.comments.size>0
                        %br
                        %b Есть ответ!
                = link_to 'Подробнее',  {:action => show_post, :project => @project, :id => post.id}, class: "more"
        -else

            %p= simple_format(post.show_content)
            - if post.attributes.has_key? 'aspect_id' and !post.aspect.nil?
                %b="#{post.aspect.content}  фрагмент"
            %br
            - if boss? or @post.user == current_user
                = link_to 'Редактировать', :action => 'edit', :project => @project, :id => @post
                \|
                = link_to 'Назад', url_for(:action => 'index')


        - if post.user == current_user
            %br
            / = link_to 'Редактировать', {:action => :edit, :project => @project, :id => post.id}
            / = link_to 'Отправить в архив', {:action => :destroy, :project => @project, :id => post.id}, :method => :delete, :data => { :confirm => 'Точно?' }

        = render 'shared/post_social_bar', :post => post

.dotline=image_tag('dotline.png')
- if current_page?(url_for(params.merge(:project => @project, :id => post.id)))  
    - if signed_in?
        = render :partial => 'shared/comment_form', :locals => { :comment => @comment, :url_link => url_for(:action => 'add_comment')}

    = render :partial => 'shared/comment',:collection => @comments
    = will_paginate @comments
