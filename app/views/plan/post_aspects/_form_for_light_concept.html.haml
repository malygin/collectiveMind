= form_for form_for_light_concept, url: {project: @project.id, stage_id: @post_stage ? @post_stage.id : nil, id: @post_concept ? @post_concept.id : (@cond ? @cond.id : nil), save_form: true, action: 'update'}, remote: true, method: :put do |f|
  #mod
  .row
    .col-md-12
      .text-center
        %p.h5.color-teal
          =t('form.concept.title')
        %br
        =f.text_field :title, style: 'width: 100%; height: 30px', placeholder: t('form.concept.title_promt')
        %br
        %br

  .row#novation_what
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b A1.
          =t('form.concept.novation_what')
        %br
        =f.text_area :name, class: "concept_cond form-control", rows: 5, style: 'width: 100%;'
        %br
  -if @project.status == 9
    = render partial: 'plan/posts/note_list', locals: {post_field: form_for_light_concept,type_fd: 1}
  .row#novation_how
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b A2.
          =t('form.concept.novation_how')
        %br
        =f.text_area :content, class: "concept_cond form-control", rows: 5, style: 'width: 100%;'
        %br
  -if @project.status == 9
    = render partial: 'plan/posts/note_list', locals: {post_field: form_for_light_concept,type_fd: 2}
  .row#cond
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b B1.
          =t('form.concept.cond')
        %br
        =f.text_area :positive, class: "concept_cond form-control", rows: 5, style: 'width: 100%;'
        %br
  -if @project.status == 9
    = render partial: 'plan/posts/note_list', locals: {post_field: form_for_light_concept,type_fd: 3}
  .row#cond_res
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b B2.
          =t('form.concept.cond_res')
  .row
    .col-md-12
      .text-left
        =t('form.concept.resources_rules')
        %br
        %b=t('form.concept.res_buttons')
        .row
          %span.color-orange
            %i.fa.fa-plus
            =t('form.concept.add_res_btn')
          %span=" - #{t('form.concept.add_res_btn_desc')}"
        .row
          %span.color-teal
            %i.fa.fa-edit
            =t('form.concept.add_desc_btn')
          %span=" - #{t('form.concept.add_desc_btn_desc')}"
        .row
          %span.color-green
            %i.fa.fa-plus
            =t('form.concept.add_mean_btn')
          %span=" - #{t('form.concept.add_mean_btn_desc')}"
        .row
          %span.text-danger
            %i.fa.fa-trash-o
            =t('form.concept.del_res_btn')
          %span=" - #{t('form.concept.del_res_btn_desc')}"
        %br
  .row
    .col-md-12.section-resources{ data: { section: "positive" } }
      .form-group{id: "resources_positive_r", style: "line-height:20px;"}
        - if form_for_light_concept.persisted? and form_for_light_concept.plan_post_resources.by_type('positive_r').any?
          -form_for_light_concept.plan_post_resources.by_type('positive_r').each_with_index do |r,i|
            %div.main_resources.main_res(id="main_positive_r_#{i+1}" data-position="#{i+1}")
              .col-md-8
                = text_field_tag 'resor[][name]', r.name, class: 'form-control autocomplete', placeholder: t('form.concept.res_promt'), 'data-url' => concept_autocomplete_path(@project, field: 'resor_name')
                %input{name: "resor[][type_res]", type: "hidden", value: "positive_r"}
              .col-md-4
                .pull-right
                  %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), class: "desc_to_res"}
                    %i.fa.fa-edit
                  %button.btn.btn-success{type: "button", title: t('form.concept.add_mean_btn'), class: "plus_mean"}
                    %i.fa.fa-plus
                  %button.btn.btn-danger{type: "button",title: t('form.concept.del_res_btn'), class: "destroy_res"}
                    %i.fa.fa-trash-o
              %br
              %br
              %div.desc_resource(id="desc_positive_r_#{i+1}" data-position="#{i+1}")
                = text_area_tag "resor[][desc]", r.desc, class: 'form-control', placeholder: t('form.concept.res_desc_promt')
                %br
              %div.col-md-offset-1.col-md-11.means_to_resource(id="means_positive_s_#{i+1}")
                -r.plan_post_resources.by_type('positive_s').each_with_index do |res,ind|
                  %div.main_means.main_res(id="main_positive_s_#{i+1}" data-position="#{i+1}")
                    .col-md-8
                      = text_field_tag 'resor[][means][][name]', res.name, class: 'form-control autocomplete', placeholder: t('form.concept.mean_promt'),
                      'data-url' => concept_autocomplete_path(@project, field: 'resor_means_name')
                      %input{name: "resor[][means][][type_res]", type: "hidden", value: "positive_s"}
                    .col-md-4
                      .pull-right
                        %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), class: "desc_to_res"}
                          %i.fa.fa-edit
                        %button.btn.btn-danger{type: "button",title: t('form.concept.del_mean_btn'), class: "destroy_res"}
                          %i.fa.fa-trash-o
                    %br
                    %br
                    %div.desc_resource(id="desc_positive_s_#{i+1}" data-position="#{i+1}")
                      = text_area_tag "resor[][means][][desc]", res.desc, class: 'form-control', placeholder: t('form.concept.mean_desc_promt')
                      %br

        -else
          %div.main_resources.main_res(id="main_positive_r_1" data-position="1")
            .col-md-8
              = text_field_tag 'resor[][name]','', class: 'form-control autocomplete', placeholder: t('form.concept.res_promt'),
              'data-url' => concept_autocomplete_path(@project, field: 'resor_name')
              %input{name: "resor[][type_res]", type: "hidden", value: "positive_r"}
            .col-md-4
              .pull-right
                %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), class: "desc_to_res"}
                  %i.fa.fa-edit
                %button.btn.btn-success{type: "button", title: t('form.concept.add_mean_btn'), class: "plus_mean"}
                  %i.fa.fa-plus
                %button.btn.btn-danger{type: "button",title: t('form.concept.del_res_btn'), class: "destroy_res"}
                  %i.fa.fa-trash-o
            %br
            %br
            %div.desc_resource(id="desc_positive_r_1" data-position="1" style="display:none;")
              = text_area_tag "resor[][desc]", '', class: 'form-control', placeholder: t('form.concept.res_desc_promt')
              %br
            %div.col-md-offset-1.col-md-11.means_to_resource(id="means_positive_s_1")
              %div.main_means.main_res(id="main_positive_s_1" data-position="1")
                .col-md-8
                  = text_field_tag 'resor[][means][][name]', '', class: 'form-control autocomplete', placeholder: t('form.concept.mean_promt'),
                  'data-url' => concept_autocomplete_path(@project, field: 'resor_means_name')
                  %input{name: "resor[][means][][type_res]", type: "hidden", value: "positive_s"}
                .col-md-4
                  .pull-right
                    %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), class: "desc_to_res"}
                      %i.fa.fa-edit
                    %button.btn.btn-danger{type: "button",title: t('form.concept.del_mean_btn'), class: "destroy_res"}
                      %i.fa.fa-trash-o
                %br
                %br
                %div.desc_resource(id="desc_positive_s_1" data-position="1" style="display:none;")
                  = text_area_tag "resor[][means][][desc]", '', class: 'form-control', placeholder: t('form.concept.mean_desc_promt')
                  %br

      %a.btn.btn-warning.pull-left{class: "plus_resource", id:"add_positive_r"}
        %i.fa.fa-plus
        =t('form.concept.add_res_btn')


  -if @project.status == 9
    = render partial: 'plan/posts/note_list', :locals => {:post_field => form_for_light_concept,:type_fd => 4}

  .row#negative_h
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b C1.
          =t('form.concept.negative_h')
        %br
        =f.text_area :negative, class: "concept_cond form-control", rows: 5, style: 'width: 100%;'
        %br
  -if @project.status == 9
    = render partial: 'plan/posts/note_list', locals: {post_field: form_for_light_concept,type_fd: 6}
  .row#negative_res
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b C2.
          =t('form.concept.negative_res')

  .row
    .col-md-12
      .text-left
        =t('form.concept.resources_rules')
        %br
        %b=t('form.concept.res_buttons')
        .row
          %span.color-orange
            %i.fa.fa-plus
            =t('form.concept.add_res_btn')
          %span=" - #{t('form.concept.add_res_btn_desc')}"
        .row
          %span.color-teal
            %i.fa.fa-edit
            =t('form.concept.add_desc_btn')
          %span=" - #{t('form.concept.add_desc_btn_desc')}"
        .row
          %span.color-green
            %i.fa.fa-plus
            =t('form.concept.add_mean_btn')
          %span=" - #{t('form.concept.add_mean_btn_desc')}"
        .row
          %span.text-danger
            %i.fa.fa-trash-o
            =t('form.concept.del_res_btn')
          %span=" - #{t('form.concept.del_res_btn_desc')}"
        %br


  .row
    .col-md-12.section-resources{ data: { section: "negative" } }
      .form-group{id: "resources_negative_r", style: "line-height:20px;"}
        - if form_for_light_concept.persisted? and form_for_light_concept.plan_post_resources.by_type('negative_r').any?
          -form_for_light_concept.plan_post_resources.by_type('negative_r').each_with_index do |r,i|
            %div.main_resources.main_res(id="main_negative_r_#{i+1}" data-position="#{i+1}")
              .col-md-8
                = text_field_tag 'resor[][name]', r.name, class: 'form-control autocomplete', placeholder: t('form.concept.res_promt'),
                                    'data-url' => concept_autocomplete_path(@project, field: 'resor_name')
                %input{name: "resor[][type_res]", type: "hidden", value: "negative_r"}
              .col-md-4
                .pull-right
                  %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), class: "desc_to_res"}
                    %i.fa.fa-edit
                  %button.btn.btn-success{type: "button", title: t('form.concept.add_mean_btn'), class: "plus_mean"}
                    %i.fa.fa-plus
                  %button.btn.btn-danger{type: "button",title: t('form.concept.del_res_btn'), class: "destroy_res"}
                    %i.fa.fa-trash-o
              %br
              %br
              %div.desc_resource(id="desc_negative_r_#{i+1}" data-position="#{i+1}")
                = text_area_tag "resor[][desc]", r.desc, class: 'form-control', placeholder: t('form.concept.res_desc_promt')
                %br
              %div.col-md-offset-1.col-md-11.means_to_resource(id="means_negative_s_#{i+1}")
                -r.plan_post_resources.by_type('negative_s').each_with_index do |res,ind|
                  %div.main_means.main_res(id="main_negative_s_#{i+1}" data-position="#{i+1}")
                    .col-md-8
                      = text_field_tag 'resor[][means][][name]', res.name, class: 'form-control autocomplete', placeholder: t('form.concept.mean_promt'),
                      'data-url' => concept_autocomplete_path(@project, field: 'resor_means_name')
                      %input{name: "resor[][means][][type_res]", type: "hidden", value: "negative_s"}
                    .col-md-4
                      .pull-right
                        %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), class: "desc_to_res"}
                          %i.fa.fa-edit
                        %button.btn.btn-danger{type: "button",title: t('form.concept.del_mean_btn'), class: "destroy_res"}
                          %i.fa.fa-trash-o
                    %br
                    %br
                    %div.desc_resource(id="desc_negative_s_#{i+1}" data-position="#{i+1}")
                      = text_area_tag "resor[][means][][desc]", res.desc, class: 'form-control', placeholder: t('form.concept.mean_desc_promt')
                      %br

        -else
          %div.main_resources.main_res(id="main_negative_r_1" data-position="1")
            .col-md-8
              = text_field_tag 'resor[][name]','', class: 'form-control autocomplete', placeholder: t('form.concept.res_promt'),
              'data-url' => concept_autocomplete_path(@project, field: 'resor_name')
              %input{name: "resor[][type_res]", type: "hidden", value: "negative_r"}
            .col-md-4
              .pull-right
                %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), class: "desc_to_res"}
                  %i.fa.fa-edit
                %button.btn.btn-success{type: "button", title: t('form.concept.add_mean_btn'), class: "plus_mean"}
                  %i.fa.fa-plus
                %button.btn.btn-danger{type: "button",title: t('form.concept.del_res_btn'), class: "destroy_res"}
                  %i.fa.fa-trash-o
            %br
            %br
            %div.desc_resource(id="desc_negative_r_1" data-position="1" style="display:none;")
              = text_area_tag "resor[][desc]", '', class: 'form-control', placeholder: t('form.concept.res_desc_promt')
              %br
            %div.col-md-offset-1.col-md-11.means_to_resource(id="means_negative_s_1")
              %div.main_means.main_res(id="main_negative_s_1" data-position="1")
                .col-md-8
                  = text_field_tag 'resor[][means][][name]', '', class: 'form-control autocomplete', placeholder: t('form.concept.mean_promt'),
                  'data-url' => concept_autocomplete_path(@project, field: 'resor_means_name')
                  %input{name: "resor[][means][][type_res]", type: "hidden", value: "negative_s"}
                .col-md-4
                  .pull-right
                    %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), id: "desc_to_res"}
                      %i.fa.fa-edit
                    %button.btn.btn-danger{type: "button",title: t('form.concept.del_mean_btn'), id: "destroy_res"}
                      %i.fa.fa-trash-o
                %br
                %br
                %div.desc_resource(id="desc_negative_s_1" data-position="1" style="display:none;")
                  = text_area_tag "resor[][means][][desc]", '', class: 'form-control', placeholder: t('form.concept.mean_desc_promt')
                  %br

      %a.btn.btn-warning.pull-left{class:"plus_resource", id:"add_negative_r"}
        %i.fa.fa-plus
        =t('form.concept.add_res_btn')

  -if @project.status == 9
    = render partial: 'plan/posts/note_list', :locals => {:post_field => form_for_light_concept,:type_fd => 7}

  .row#control
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b D1.
          =t('form.concept.control')
        %br
        =f.text_area :control, class: "concept_cond form-control", rows: 5,  style: 'width: 100%;'
        %br
  -if @project.status == 9
    = render partial: 'plan/posts/note_list', locals: {post_field: form_for_light_concept,type_fd: 9}
  .row#control_res
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b D2.
          =t('form.concept.control_res')

  .row
    .col-md-12
      .text-left
        =t('form.concept.resources_rules')
        %br
        %b=t('form.concept.res_buttons')
        .row
          %span.color-orange
            %i.fa.fa-plus
            =t('form.concept.add_res_btn')
          %span=" - #{t('form.concept.add_res_btn_desc')}"
        .row
          %span.color-teal
            %i.fa.fa-edit
            =t('form.concept.add_desc_btn')
          %span=" - #{t('form.concept.add_desc_btn_desc')}"
        .row
          %span.color-green
            %i.fa.fa-plus
            =t('form.concept.add_mean_btn')
          %span=" - #{t('form.concept.add_mean_btn_desc')}"
        .row
          %span.text-danger
            %i.fa.fa-trash-o
            =t('form.concept.del_res_btn')
          %span=" - #{t('form.concept.del_res_btn_desc')}"
        %br

  .row
    .col-md-12.section-resources{ data: { section: "control" } }
      .form-group{id: "resources_control_r", style: "line-height:20px;"}
        - if form_for_light_concept.persisted? and form_for_light_concept.plan_post_resources.by_type('control_r').any?
          -form_for_light_concept.plan_post_resources.by_type('control_r').each_with_index do |r,i|
            %div.main_resources.main_res(id="main_control_r_#{i+1}" data-position="#{i+1}")
              .col-md-8
                = text_field_tag 'resor[][name]', r.name, class: 'form-control autocomplete', placeholder: t('form.concept.res_promt'),
                                    'data-url' => concept_autocomplete_path(@project, field: 'resor_name')
                %input{name: "resor[][type_res]", type: "hidden", value: "control_r"}
              .col-md-4
                .pull-right
                  %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'),  class: "desc_to_res"}
                    %i.fa.fa-edit
                  %button.btn.btn-success{type: "button", title: t('form.concept.add_mean_btn'), class: "plus_mean"}
                    %i.fa.fa-plus
                  %button.btn.btn-danger{type: "button",title: t('form.concept.del_res_btn'),  class: "destroy_res"}
                    %i.fa.fa-trash-o
              %br
              %br
              %div.desc_resource(id="desc_control_r_#{i+1}" data-position="#{i+1}")
                = text_area_tag "resor[][desc]", r.desc, class: 'form-control', placeholder: t('form.concept.res_desc_promt')
                %br
              %div.col-md-offset-1.col-md-11.means_to_resource(id="means_control_s_#{i+1}")
                -r.plan_post_resources.by_type('control_s').each_with_index do |res,ind|
                  %div.main_means.main_res(id="main_control_s_#{i+1}" data-position="#{i+1}")
                    .col-md-8
                      = text_field_tag 'resor[][means][][name]', res.name, class: 'form-control autocomplete', placeholder: t('form.concept.mean_promt'),
                      'data-url' => concept_autocomplete_path(@project, field: 'resor_means_name')
                      %input{name: "resor[][means][][type_res]", type: "hidden", value: "control_s"}
                    .col-md-4
                      .pull-right
                        %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), class: "desc_to_res"}
                          %i.fa.fa-edit
                        %button.btn.btn-danger{type: "button",title: t('form.concept.del_mean_btn'), class: "destroy_res"}
                          %i.fa.fa-trash-o
                    %br
                    %br
                    %div.desc_resource(id="desc_control_s_#{i+1}" data-position="#{i+1}")
                      = text_area_tag "resor[][means][][desc]", res.desc, class: 'form-control', placeholder: t('form.concept.mean_desc_promt')
                      %br

        -else
          %div.main_resources.main_res(id="main_control_r_1" data-position="1")
            .col-md-8
              = text_field_tag 'resor[][name]','', class: 'form-control autocomplete', placeholder: t('form.concept.res_promt'),
              'data-url' => concept_autocomplete_path(@project, field: 'resor_name')
              %input{name: "resor[][type_res]", type: "hidden", value: "control_r"}
            .col-md-4
              .pull-right
                %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'),  class: "desc_to_res"}
                  %i.fa.fa-edit
                %button.btn.btn-success{type: "button", title: t('form.concept.add_mean_btn'), class: "plus_mean"}
                  %i.fa.fa-plus
                %button.btn.btn-danger{type: "button",title: t('form.concept.del_res_btn'), class: "destroy_res"}
                  %i.fa.fa-trash-o

            %br
            %br
            %div.desc_resource(id="desc_control_r_1" data-position="1" style="display:none;")
              = text_area_tag "resor[][desc]", '', class: 'form-control', placeholder: t('form.concept.res_desc_promt')
              %br
            %div.col-md-offset-1.col-md-11.means_to_resource(id="means_control_s_1")
              %div.main_means.main_res(id="main_control_s_1" data-position="1")
                .col-md-8
                  = text_field_tag 'resor[][means][][name]', '', class: 'form-control autocomplete', placeholder: t('form.concept.mean_promt'),
                  'data-url' => concept_autocomplete_path(@project, field: 'resor_means_name')
                  %input{name: "resor[][means][][type_res]", type: "hidden", value: "control_s"}
                .col-md-4
                  .pull-right
                    %button.btn.btn-info{type: "button", title: t('form.concept.add_desc_btn'), class: "desc_to_res"}
                      %i.fa.fa-edit
                    %button.btn.btn-danger{type: "button",title: t('form.concept.del_mean_btn'), class: "destroy_res"}
                      %i.fa.fa-trash-o

                %br
                %br
                %div.desc_resource(id="desc_control_s_1" data-position="1" style="display:none;")
                  = text_area_tag "resor[][means][][desc]", '', class: 'form-control', placeholder: t('form.concept.mean_desc_promt')
                  %br

      %a.btn.btn-warning.pull-left{class:"plus_resource", id:"add_control_r"}
        %i.fa.fa-plus
        =t('form.concept.add_res_btn')

  -if @project.status == 9
    = render partial: 'plan/posts/note_list', :locals => {:post_field => form_for_light_concept,:type_fd => 10}

  .row#obstacles_bcd
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b E1.
          =t('form.concept.obstacles_bcd')
        %br
        =f.text_area :obstacles, class: "concept_cond form-control", rows: 5,  style: 'width: 100%;'
        %br
  -if @project.status == 9
    = render partial: 'plan/posts/note_list', locals: {post_field: form_for_light_concept,type_fd: 12}
  .row#problems
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b F1.
          =t('form.concept.problems')
        %br
        =f.text_area :problems, class: "concept_cond form-control", rows: 5, style: 'width: 100%;'
        %br
  -if @project.status == 9
    = render partial: 'plan/posts/note_list', locals: {post_field: form_for_light_concept,type_fd: 13}
  .row#reality
    .col-md-12
      .text-center
        %p.h5.color-teal
          %b F2.
          =t('form.concept.reality')
        %br
        =f.text_area :reality, class: "concept_cond form-control", rows: 5, style: 'width: 100%;'
        %br
  -if @project.status == 9
    = render partial: 'plan/posts/note_list', locals: {post_field: form_for_light_concept,type_fd: 14}

  .pull-right
    =f.submit t('form.save'), id: "send_post", class: 'btn btn-success'
