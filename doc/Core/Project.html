<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Core::Project
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Core/Project.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Core.html" title="Core (module)">Core</a></span></span>
     &raquo; 
    <span class="title">Project</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Core::Project
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">Core::Project</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/models/core/project.rb</dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="LIST_STAGES-constant" class="">LIST_STAGES =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='int'>1</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Введение в процедуру</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type_stage:</span> <span class='symbol'>:collect_info_posts</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>20</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='comma'>,</span>
<span class='int'>2</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Анализ ситуации</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type_stage:</span> <span class='symbol'>:discontent_posts</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='comma'>,</span>
<span class='int'>3</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Сбор идей</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type_stage:</span> <span class='symbol'>:concept_posts</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='lbracket'>[</span><span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='comma'>,</span>
<span class='int'>4</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Объединение идей в пакеты</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type_stage:</span> <span class='symbol'>:novation_posts</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='lbracket'>[</span><span class='int'>9</span><span class='comma'>,</span> <span class='int'>10</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='comma'>,</span>
<span class='int'>5</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Проектное предложение</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type_stage:</span> <span class='symbol'>:plan_posts</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='lbracket'>[</span><span class='int'>11</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='comma'>,</span>
<span class='int'>6</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Подведение итогов</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type_stage:</span> <span class='symbol'>:estimate_posts</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='lbracket'>[</span><span class='int'>12</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='comma'>,</span>
<span class='int'>7</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Завершение процедуры</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>type_stage:</span> <span class='symbol'>:completion_proc_posts</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='lbracket'>[</span><span class='int'>13</span><span class='comma'>,</span> <span class='int'>14</span><span class='comma'>,</span> <span class='int'>15</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="TYPE_ACCESS-constant" class="">TYPE_ACCESS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='int'>0</span> <span class='op'>=&gt;</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>form.project.opened</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='int'>1</span> <span class='op'>=&gt;</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>form.project.club</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='int'>2</span> <span class='op'>=&gt;</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>form.project.closed</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="TYPE_ACCESS_CODE-constant" class="">TYPE_ACCESS_CODE =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='label'>opened:</span> <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>club:</span> <span class='int'>1</span><span class='comma'>,</span>
    <span class='label'>closed:</span> <span class='int'>2</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="STATUS_CODES-constant" class="">STATUS_CODES =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
    <span class='label'>prepare:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='comment'># 1 round questions
</span>    <span class='label'>collect_info:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='comment'># 2 round questions
</span>    <span class='label'>vote_aspects:</span> <span class='int'>2</span><span class='comma'>,</span> <span class='comment'># vote
</span>    <span class='label'>discontent:</span> <span class='int'>3</span><span class='comma'>,</span>
    <span class='label'>group_discontent:</span> <span class='int'>4</span><span class='comma'>,</span>
    <span class='label'>discuss_discontent:</span> <span class='int'>5</span><span class='comma'>,</span>
    <span class='label'>vote_discontent:</span> <span class='int'>6</span><span class='comma'>,</span>
    <span class='label'>concept:</span> <span class='int'>7</span><span class='comma'>,</span>
    <span class='label'>vote_concept:</span> <span class='int'>8</span><span class='comma'>,</span>
    <span class='label'>novation:</span> <span class='int'>9</span><span class='comma'>,</span>
    <span class='label'>vote_novation:</span> <span class='int'>10</span><span class='comma'>,</span>
    <span class='label'>plan:</span> <span class='int'>11</span><span class='comma'>,</span>
    <span class='comment'># vote_plan: 12,
</span>    <span class='label'>estimate:</span> <span class='int'>12</span><span class='comma'>,</span>
    <span class='label'>vote_final:</span> <span class='int'>13</span><span class='comma'>,</span>
    <span class='label'>wait_decision:</span> <span class='int'>14</span><span class='comma'>,</span>
    <span class='label'>wait_final:</span> <span class='int'>15</span><span class='comma'>,</span>
    <span class='label'>complete:</span> <span class='int'>20</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status_title-class_method" title="status_title (class method)">+ (Object) <strong>status_title</strong>(status) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>def closed?   self.type_access == 2 end.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#able_add_note%3F-instance_method" title="#able_add_note? (instance method)">- (Boolean) <strong>able_add_note?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#average_time-instance_method" title="#average_time (instance method)">- (Object) <strong>average_time</strong>(type_users = &#39;not_moderators&#39;, duration = 5.days.ago) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_add_content%3F-instance_method" title="#can_add_content? (instance method)">- (Boolean) <strong>can_add_content?</strong>(stage) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_edit_on_current_stage-instance_method" title="#can_edit_on_current_stage (instance method)">- (Object) <strong>can_edit_on_current_stage</strong>(p) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#closed%3F-instance_method" title="#closed? (instance method)">- (Boolean) <strong>closed?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#concept_comments-instance_method" title="#concept_comments (instance method)">- (Object) <strong>concept_comments</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#concepts_without_aspect-instance_method" title="#concepts_without_aspect (instance method)">- (Object) <strong>concepts_without_aspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count_actions-instance_method" title="#count_actions (instance method)">- (Object) <strong>count_actions</strong>(type_users = &#39;for_moderators&#39;, duration = 5.days.ago) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count_pages-instance_method" title="#count_pages (instance method)">- (Object) <strong>count_pages</strong>(type_users = &#39;not_moderators&#39;, duration = 5.days.ago) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Возвращает статистику открытых страниц пользователями Формат дата:
user.to_s: кол-во посещенных страниц type_users - строка, соответствующая
скоупу в журнале.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count_people-instance_method" title="#count_people (instance method)">- (Object) <strong>count_people</strong>(type_users = &#39;not_moderators&#39;, duration = 5.days.ago) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_aspects-instance_method" title="#current_aspects (instance method)">- (Object) <strong>current_aspects</strong>(current_stage) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_page%3F-instance_method" title="#current_page? (instance method)">- (Boolean) <strong>current_page?</strong>(page, status) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_stage-instance_method" title="#current_stage (instance method)">- (Object) <strong>current_stage</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_stage%3F-instance_method" title="#current_stage? (instance method)">- (Boolean) <strong>current_stage?</strong>(stage) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_stage_num-instance_method" title="#current_stage_num (instance method)">- (Object) <strong>current_stage_num</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_stage_number-instance_method" title="#current_stage_number (instance method)">- (Object) <strong>current_stage_number</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_stage_type-instance_method" title="#current_stage_type (instance method)">- (Object) <strong>current_stage_type</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_stage_type_for_cabinet-instance_method" title="#current_stage_type_for_cabinet (instance method)">- (Object) <strong>current_stage_type_for_cabinet</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_stage_values-instance_method" title="#current_stage_values (instance method)">- (Object) <strong>current_stage_values</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_status%3F-instance_method" title="#current_status? (instance method)">- (Boolean) <strong>current_status?</strong>(status) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#date_begin_stage-instance_method" title="#date_begin_stage (instance method)">- (Object) <strong>date_begin_stage</strong>(table_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#date_end_stage-instance_method" title="#date_end_stage (instance method)">- (Object) <strong>date_end_stage</strong>(table_name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#demo%3F-instance_method" title="#demo? (instance method)">- (Boolean) <strong>demo?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discontent_comments-instance_method" title="#discontent_comments (instance method)">- (Object) <strong>discontent_comments</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discontents_without_aspect-instance_method" title="#discontents_without_aspect (instance method)">- (Object) <strong>discontents_without_aspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#essay_count-instance_method" title="#essay_count (instance method)">- (Object) <strong>essay_count</strong>(stage) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_free_votes_for-instance_method" title="#get_free_votes_for (instance method)">- (Object) <strong>get_free_votes_for</strong>(user, stage) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_united_posts_for_vote-instance_method" title="#get_united_posts_for_vote (instance method)">- (Object) <strong>get_united_posts_for_vote</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>def proc_aspects   self.aspects.where(status: 0) end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#model_min_stage-instance_method" title="#model_min_stage (instance method)">- (Object) <strong>model_min_stage</strong>(model) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#moderators-instance_method" title="#moderators (instance method)">- (Object) <strong>moderators</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next_status-instance_method" title="#next_status (instance method)">- (Object) <strong>next_status</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prev_status-instance_method" title="#prev_status (instance method)">- (Object) <strong>prev_status</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project_access-instance_method" title="#project_access (instance method)">- (Object) <strong>project_access</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_date_for_stage-instance_method" title="#set_date_for_stage (instance method)">- (Object) <strong>set_date_for_stage</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_position_for_aspects-instance_method" title="#set_position_for_aspects (instance method)">- (Object) <strong>set_position_for_aspects</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stage1_count-instance_method" title="#stage1_count (instance method)">- (Object) <strong>stage1_count</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stage_style-instance_method" title="#stage_style (instance method)">- (Object) <strong>stage_style</strong>(status) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stage_style_link-instance_method" title="#stage_style_link (instance method)">- (Object) <strong>stage_style_link</strong>(name_page, status) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#statistic_visits-instance_method" title="#statistic_visits (instance method)">- (Object) <strong>statistic_visits</strong>(duration) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Аналитика.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status_number-instance_method" title="#status_number (instance method)">- (Object) <strong>status_number</strong>(status) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#type_access_name-instance_method" title="#type_access_name (instance method)">- (Object) <strong>type_access_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#type_for_questions-instance_method" title="#type_for_questions (instance method)">- (Object) <strong>type_for_questions</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>тип вопроса в зависимости от этапа.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uniq_proc%3F-instance_method" title="#uniq_proc? (instance method)">- (Boolean) <strong>uniq_proc?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uniq_proc_access%3F-instance_method" title="#uniq_proc_access? (instance method)">- (Boolean) <strong>uniq_proc_access?</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="status_title-class_method">
  
    + (<tt>Object</tt>) <strong>status_title</strong>(status) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>def closed?</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_type_access'>type_access</span> <span class='op'>==</span> <span class='int'>2</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 356</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status_title'>status_title</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_status'>status</span>
    <span class='kw'>when</span> <span class='int'>0</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>подготовка к процедуре</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>1</span><span class='comma'>,</span> <span class='symbol'>:collect_info_posts</span>
      <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stages.life_tape</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='int'>2</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>голосование за темы и рефлексия</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>3</span><span class='comma'>,</span> <span class='symbol'>:discontent_posts</span>
      <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stages.discontent</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='int'>4</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>группировка несовершенств</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>5</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>обсуждение сгруппированных несовершенств</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>6</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>голосование за несовершенства и рефлексия</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>7</span><span class='comma'>,</span> <span class='symbol'>:concept_posts</span>
      <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stages.concept</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='int'>8</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>голосование за нововведения и рефлексия</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>9</span><span class='comma'>,</span> <span class='symbol'>:plan_posts</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Создание проектов</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>10</span><span class='comma'>,</span> <span class='symbol'>:estimate_posts</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Выставление оценок</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>11</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>голосование за проекты</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>when</span> <span class='int'>12</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>подведение итогов</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>завершена</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="able_add_note?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>able_add_note?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 212</span>

<span class='kw'>def</span> <span class='id identifier rubyid_able_add_note?'>able_add_note?</span>
  <span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="average_time-instance_method">
  
    - (<tt>Object</tt>) <strong>average_time</strong>(type_users = &#39;not_moderators&#39;, duration = 5.days.ago) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


493
494
495
496
497
498
499
500
501
502</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 493</span>

<span class='kw'>def</span> <span class='id identifier rubyid_average_time'>average_time</span><span class='lparen'>(</span><span class='id identifier rubyid_type_users'>type_users</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>not_moderators</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_duration'>duration</span> <span class='op'>=</span> <span class='int'>5</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_ago'>ago</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_visits'>visits</span> <span class='op'>=</span> <span class='id identifier rubyid_statistic_visits'>statistic_visits</span><span class='lparen'>(</span><span class='id identifier rubyid_duration'>duration</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_type_users'>type_users</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DATE_TRUNC(&#39;day&#39;, journals.created_at) as day,
                round(CAST(float8 (extract(epoch from sum(journals.updated_at - journals.created_at)::INTERVAL)/60) as numeric), 2) / count(DISTINCT journals.user_id) as minutes</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DATE_TRUNC(&#39;day&#39;, journals.created_at)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_visit_data'>visit_data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_visits'>visits</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_visit'>visit</span><span class='op'>|</span>
    <span class='id identifier rubyid_visit_data'>visit_data</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='label'>x:</span> <span class='lparen'>(</span><span class='id identifier rubyid_visit'>visit</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_to_datetime'>to_datetime</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='int'>1000</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_visit'>visit</span><span class='period'>.</span><span class='id identifier rubyid_minutes'>minutes</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='lbracket'>[</span><span class='lbrace'>{</span><span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Среднее время</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>values:</span> <span class='id identifier rubyid_visit_data'>visit_data</span><span class='rbrace'>}</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_add_content?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>can_add_content?</strong>(stage) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 331</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_add_content?'>can_add_content?</span><span class='lparen'>(</span><span class='id identifier rubyid_stage'>stage</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_stage'>stage</span> <span class='op'>==</span> <span class='symbol'>:collect_info_posts</span>
    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stage'>stage</span> <span class='op'>==</span> <span class='symbol'>:discontent_posts</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>3</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stage'>stage</span> <span class='op'>==</span> <span class='symbol'>:concept_posts</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>7</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stage'>stage</span> <span class='op'>==</span> <span class='symbol'>:novation_posts</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>9</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stage'>stage</span> <span class='op'>==</span> <span class='symbol'>:plan_posts</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>11</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stage'>stage</span> <span class='op'>==</span> <span class='symbol'>:estimate_posts</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>13</span>
  <span class='kw'>end</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_edit_on_current_stage-instance_method">
  
    - (<tt>Object</tt>) <strong>can_edit_on_current_stage</strong>(p) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280
281
282
283
284
285
286
287
288
289</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 278</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_edit_on_current_stage'>can_edit_on_current_stage</span><span class='lparen'>(</span><span class='id identifier rubyid_p'>p</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_instance_of?'>instance_of?</span> <span class='const'>Discontent</span><span class='op'>::</span><span class='const'>Post</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>3</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_instance_of?'>instance_of?</span> <span class='const'>Concept</span><span class='op'>::</span><span class='const'>Post</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>7</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_instance_of?'>instance_of?</span> <span class='const'>Plan</span><span class='op'>::</span><span class='const'>Post</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>9</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_instance_of?'>instance_of?</span> <span class='const'>Estimate</span><span class='op'>::</span><span class='const'>Post</span>
    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>10</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="closed?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>closed?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_closed?'>closed?</span>
  <span class='id identifier rubyid_type_access'>type_access</span> <span class='op'>==</span> <span class='const'>TYPE_ACCESS_CODE</span><span class='lbracket'>[</span><span class='symbol'>:closed</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="concept_comments-instance_method">
  
    - (<tt>Object</tt>) <strong>concept_comments</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


417
418
419
420</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 417</span>

<span class='kw'>def</span> <span class='id identifier rubyid_concept_comments'>concept_comments</span>
  <span class='const'>Concept</span><span class='op'>::</span><span class='const'>Comment</span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>INNER JOIN concept_posts ON concept_comments.post_id = concept_posts.id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>concept_posts.project_id = ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="concepts_without_aspect-instance_method">
  
    - (<tt>Object</tt>) <strong>concepts_without_aspect</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_concepts_without_aspect'>concepts_without_aspect</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_concept_ongoing_post'>concept_ongoing_post</span><span class='period'>.</span><span class='id identifier rubyid_includes'>includes</span><span class='lparen'>(</span><span class='symbol'>:concept_post_discontents</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>concept_post_discontents:</span> <span class='lbrace'>{</span><span class='label'>post_id:</span> <span class='kw'>nil</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count_actions-instance_method">
  
    - (<tt>Object</tt>) <strong>count_actions</strong>(type_users = &#39;for_moderators&#39;, duration = 5.days.ago) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


505
506
507
508
509
510
511
512
513
514
515
516
517</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 505</span>

<span class='kw'>def</span> <span class='id identifier rubyid_count_actions'>count_actions</span><span class='lparen'>(</span><span class='id identifier rubyid_type_users'>type_users</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>for_moderators</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_duration'>duration</span> <span class='op'>=</span> <span class='int'>5</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_ago'>ago</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_actions'>actions</span> <span class='op'>=</span> <span class='id identifier rubyid_journals'>journals</span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>journals.created_at &gt; ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_duration'>duration</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_type_users'>type_users</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>COUNT(*) AS count_actions, DATE_TRUNC(&#39;day&#39;, journals.created_at) as day, user_id AS user_id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DATE_TRUNC(&#39;day&#39;, journals.created_at), user_id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>count_actions DESC</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dates'>dates</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_actions'>actions</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_action'>action</span><span class='op'>|</span>
    <span class='id identifier rubyid_dates'>dates</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span>
    <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_count_actions'>count_actions</span>
  <span class='kw'>end</span>
  <span class='lbrace'>{</span><span class='label'>dates:</span> <span class='id identifier rubyid_dates'>dates</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='comma'>,</span> <span class='label'>users:</span> <span class='id identifier rubyid_users'>users</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count_pages-instance_method">
  
    - (<tt>Object</tt>) <strong>count_pages</strong>(type_users = &#39;not_moderators&#39;, duration = 5.days.ago) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Возвращает статистику открытых страниц пользователями Формат дата:
user.to_s: кол-во посещенных страниц type_users - строка, соответствующая
скоупу в журнале</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


467
468
469
470
471
472
473
474
475
476
477
478
479</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 467</span>

<span class='kw'>def</span> <span class='id identifier rubyid_count_pages'>count_pages</span><span class='lparen'>(</span><span class='id identifier rubyid_type_users'>type_users</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>not_moderators</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_duration'>duration</span> <span class='op'>=</span> <span class='int'>5</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_ago'>ago</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pages'>pages</span> <span class='op'>=</span> <span class='id identifier rubyid_statistic_visits'>statistic_visits</span><span class='lparen'>(</span><span class='id identifier rubyid_duration'>duration</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_type_users'>type_users</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>COUNT(*) AS count_pages, DATE_TRUNC(&#39;day&#39;, journals.created_at) as day, user_id AS user_id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DATE_TRUNC(&#39;day&#39;, journals.created_at), user_id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>count_pages DESC</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dates'>dates</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_pages'>pages</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_page'>page</span><span class='op'>|</span>
    <span class='id identifier rubyid_dates'>dates</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span>
    <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_users'>users</span><span class='lbracket'>[</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_count_pages'>count_pages</span>
  <span class='kw'>end</span>
  <span class='lbrace'>{</span><span class='label'>dates:</span> <span class='id identifier rubyid_dates'>dates</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span><span class='comma'>,</span> <span class='label'>users:</span> <span class='id identifier rubyid_users'>users</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count_people-instance_method">
  
    - (<tt>Object</tt>) <strong>count_people</strong>(type_users = &#39;not_moderators&#39;, duration = 5.days.ago) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


481
482
483
484
485
486
487
488
489
490
491</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 481</span>

<span class='kw'>def</span> <span class='id identifier rubyid_count_people'>count_people</span><span class='lparen'>(</span><span class='id identifier rubyid_type_users'>type_users</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>not_moderators</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_duration'>duration</span> <span class='op'>=</span> <span class='int'>5</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_ago'>ago</span><span class='rparen'>)</span>
  <span class='comment'># Запрос возвращает хеш, где ключ - дата, значение - количество юзеров
</span>  <span class='comment'># например, {2015-01-25 00:00:00 +0300=&gt;1, 2015-01-26 00:00:00 +0300=&gt;1}
</span>  <span class='comment'># и затем мы преобразуем дату для работы на клиенте (хз, почему именно так)
</span>  <span class='id identifier rubyid_visits'>visits</span> <span class='op'>=</span> <span class='id identifier rubyid_statistic_visits'>statistic_visits</span><span class='lparen'>(</span><span class='id identifier rubyid_duration'>duration</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_type_users'>type_users</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DISTINCT user_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DATE_TRUNC(&#39;day&#39;, journals.created_at)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
  <span class='id identifier rubyid_visit_data'>visit_data</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_visits'>visits</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_visit'>visit</span><span class='comma'>,</span> <span class='id identifier rubyid_minutes'>minutes</span><span class='op'>|</span>
    <span class='id identifier rubyid_visit_data'>visit_data</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='label'>x:</span> <span class='lparen'>(</span><span class='id identifier rubyid_visit'>visit</span><span class='period'>.</span><span class='id identifier rubyid_to_datetime'>to_datetime</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>*</span> <span class='int'>1000</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='label'>y:</span> <span class='id identifier rubyid_minutes'>minutes</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='lbracket'>[</span><span class='lbrace'>{</span><span class='label'>key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Посетителей</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>values:</span> <span class='id identifier rubyid_visit_data'>visit_data</span><span class='rbrace'>}</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_aspects-instance_method">
  
    - (<tt>Object</tt>) <strong>current_aspects</strong>(current_stage) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151
152
153
154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_aspects'>current_aspects</span><span class='lparen'>(</span><span class='id identifier rubyid_current_stage'>current_stage</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_current_stage'>current_stage</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>collect_info/posts</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_aspects'>aspects</span><span class='period'>.</span><span class='id identifier rubyid_main_aspects'>main_aspects</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_proc_aspects'>proc_aspects</span><span class='period'>.</span><span class='id identifier rubyid_main_aspects'>main_aspects</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='kw'>and</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_proc_aspects'>proc_aspects</span><span class='period'>.</span><span class='id identifier rubyid_main_aspects'>main_aspects</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_position'>position</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_proc_aspects'>proc_aspects</span><span class='period'>.</span><span class='id identifier rubyid_main_aspects'>main_aspects</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>position DESC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_proc_aspects'>proc_aspects</span><span class='period'>.</span><span class='id identifier rubyid_main_aspects'>main_aspects</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_page?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>current_page?</strong>(page, status) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 273</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_page?'>current_page?</span><span class='lparen'>(</span><span class='id identifier rubyid_page'>page</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sort_list'>sort_list</span> <span class='op'>=</span> <span class='const'>LIST_STAGES</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='symbol'>:type_stage</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_status'>status</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_sort_list'>sort_list</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_page'>page</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_stage-instance_method">
  
    - (<tt>Object</tt>) <strong>current_stage</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_stage'>current_stage</span>
  <span class='const'>LIST_STAGES</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_hash'>hash</span><span class='op'>|</span> <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_status'>status</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_stage?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>current_stage?</strong>(stage) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 240</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_stage?'>current_stage?</span><span class='lparen'>(</span><span class='id identifier rubyid_stage'>stage</span><span class='rparen'>)</span>
  <span class='const'>Core</span><span class='op'>::</span><span class='const'>Project</span><span class='op'>::</span><span class='const'>LIST_STAGES</span><span class='lbracket'>[</span><span class='id identifier rubyid_stage'>stage</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_status'>status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_stage_num-instance_method">
  
    - (<tt>Object</tt>) <strong>current_stage_num</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_stage_num'>current_stage_num</span>
  <span class='id identifier rubyid_current_stage'>current_stage</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_stage_number-instance_method">
  
    - (<tt>Object</tt>) <strong>current_stage_number</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_stage_number'>current_stage_number</span>
  <span class='id identifier rubyid_current_stage'>current_stage</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_stage_type-instance_method">
  
    - (<tt>Object</tt>) <strong>current_stage_type</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 128</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_stage_type'>current_stage_type</span>
  <span class='id identifier rubyid_current_stage_values'>current_stage_values</span><span class='lbracket'>[</span><span class='symbol'>:type_stage</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_stage_type_for_cabinet-instance_method">
  
    - (<tt>Object</tt>) <strong>current_stage_type_for_cabinet</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note todo">
    <strong>TODO:</strong>
    <div class='inline'>
<p>нужно универсализовать эту логику</p>
</div>
  </div>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_stage_type_for_cabinet'>current_stage_type_for_cabinet</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_current_stage_values'>current_stage_values</span><span class='lbracket'>[</span><span class='symbol'>:type_stage</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:collect_info_posts</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>aspect_posts</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_current_stage_values'>current_stage_values</span><span class='lbracket'>[</span><span class='symbol'>:type_stage</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_stage_values-instance_method">
  
    - (<tt>Object</tt>) <strong>current_stage_values</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_stage_values'>current_stage_values</span>
  <span class='id identifier rubyid_current_stage'>current_stage</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_status?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>current_status?</strong>(status) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 235</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_status?'>current_status?</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sort_list'>sort_list</span> <span class='op'>=</span> <span class='const'>LIST_STAGES</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='symbol'>:type_stage</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_status'>status</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_sort_list'>sort_list</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:status</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="date_begin_stage-instance_method">
  
    - (<tt>Object</tt>) <strong>date_begin_stage</strong>(table_name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note todo">
    <strong>TODO:</strong>
    <div class='inline'>
<p>REF  move to helper</p>
</div>
  </div>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


429
430
431
432
433
434
435
436
437
438
439
440
441
442</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 429</span>

<span class='kw'>def</span> <span class='id identifier rubyid_date_begin_stage'>date_begin_stage</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>=</span> <span class='id identifier rubyid_table_name'>table_name</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_posts</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_comments</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>collect_info</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_created_at'>created_at</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>discontent</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_date_12'>date_12</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>concept</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_date_23'>date_23</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>plan</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_date_34'>date_34</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>estimate</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_date_45'>date_45</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="date_end_stage-instance_method">
  
    - (<tt>Object</tt>) <strong>date_end_stage</strong>(table_name) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


444
445
446
447
448
449
450
451
452
453
454
455
456
457</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 444</span>

<span class='kw'>def</span> <span class='id identifier rubyid_date_end_stage'>date_end_stage</span><span class='lparen'>(</span><span class='id identifier rubyid_table_name'>table_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>=</span> <span class='id identifier rubyid_table_name'>table_name</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_posts</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_comments</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>collect_info</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_date_12'>date_12</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>discontent</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_date_23'>date_23</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>concept</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_date_34'>date_34</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>plan</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_date_45'>date_45</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_table_name'>table_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>estimate</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_date_56'>date_56</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="demo?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>demo?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 348</span>

<span class='kw'>def</span> <span class='id identifier rubyid_demo?'>demo?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_type_access'>type_access</span> <span class='op'>==</span> <span class='int'>3</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discontent_comments-instance_method">
  
    - (<tt>Object</tt>) <strong>discontent_comments</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


422
423
424
425</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 422</span>

<span class='kw'>def</span> <span class='id identifier rubyid_discontent_comments'>discontent_comments</span>
  <span class='const'>Discontent</span><span class='op'>::</span><span class='const'>Comment</span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>INNER JOIN discontent_posts ON discontent_comments.post_id = discontent_posts.id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>discontent_posts.project_id = ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discontents_without_aspect-instance_method">
  
    - (<tt>Object</tt>) <strong>discontents_without_aspect</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 165</span>

<span class='kw'>def</span> <span class='id identifier rubyid_discontents_without_aspect'>discontents_without_aspect</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_discontents'>discontents</span><span class='period'>.</span><span class='id identifier rubyid_includes'>includes</span><span class='lparen'>(</span><span class='symbol'>:discontent_post_aspects</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>discontent_post_aspects:</span> <span class='lbrace'>{</span><span class='label'>post_id:</span> <span class='kw'>nil</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="essay_count-instance_method">
  
    - (<tt>Object</tt>) <strong>essay_count</strong>(stage) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


389
390
391</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 389</span>

<span class='kw'>def</span> <span class='id identifier rubyid_essay_count'>essay_count</span><span class='lparen'>(</span><span class='id identifier rubyid_stage'>stage</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_essays'>essays</span><span class='period'>.</span><span class='id identifier rubyid_by_stage'>by_stage</span><span class='lparen'>(</span><span class='id identifier rubyid_stage'>stage</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_free_votes_for-instance_method">
  
    - (<tt>Object</tt>) <strong>get_free_votes_for</strong>(user, stage) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


173
174
175
176
177
178
179
180
181
182
183
184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 173</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_free_votes_for'>get_free_votes_for</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_stage'>stage</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_stage'>stage</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>collect_info</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_proc_main_aspects'>proc_main_aspects</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_voted_aspects'>voted_aspects</span><span class='period'>.</span><span class='id identifier rubyid_by_project'>by_project</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>discontent</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_discontent_for_vote'>discontent_for_vote</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_voted_discontent_posts'>voted_discontent_posts</span><span class='period'>.</span><span class='id identifier rubyid_for_project'>for_project</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>concept</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_concept_ongoing_post'>concept_ongoing_post</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_voted_concept_post'>voted_concept_post</span><span class='period'>.</span><span class='id identifier rubyid_by_project'>by_project</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>novation</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_novations'>novations</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_voted_novation_post'>voted_novation_post</span><span class='period'>.</span><span class='id identifier rubyid_by_project'>by_project</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>plan</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_stage5'>stage5</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>-</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_voted_plan_posts'>voted_plan_posts</span><span class='period'>.</span><span class='id identifier rubyid_by_project'>by_project</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_united_posts_for_vote-instance_method">
  
    - (<tt>Object</tt>) <strong>get_united_posts_for_vote</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>def proc_aspects</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_aspects'>aspects</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>status:</span> <span class='int'>0</span><span class='rparen'>)</span>
</code></pre>

<p>end</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222
223
224
225
226
227
228
229
230
231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 220</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_united_posts_for_vote'>get_united_posts_for_vote</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_voted'>voted</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_voted_discontent_posts'>voted_discontent_posts</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_all_posts'>all_posts</span> <span class='op'>=</span> <span class='const'>Discontent</span><span class='op'>::</span><span class='const'>Post</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>project_id:</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='int'>4</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='period'>.</span><span class='id identifier rubyid_not'>not</span><span class='lparen'>(</span><span class='label'>id:</span> <span class='id identifier rubyid_voted'>voted</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_includes'>includes</span><span class='lparen'>(</span><span class='symbol'>:post_aspects</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>core_aspect_posts.id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_one_posts'>one_posts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_many_posts'>many_posts</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_all_posts'>all_posts</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_post'>post</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_post_aspects'>post_aspects</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span>
      <span class='id identifier rubyid_one_posts'>one_posts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_post'>post</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_many_posts'>many_posts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_post'>post</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_one_posts'>one_posts</span> <span class='op'>|</span> <span class='id identifier rubyid_many_posts'>many_posts</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="model_min_stage-instance_method">
  
    - (<tt>Object</tt>) <strong>model_min_stage</strong>(model) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 310</span>

<span class='kw'>def</span> <span class='id identifier rubyid_model_min_stage'>model_min_stage</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_model'>model</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>collect_info_post</span><span class='tstring_end'>&#39;</span></span>
      <span class='int'>0</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>discontent_post</span><span class='tstring_end'>&#39;</span></span>
      <span class='int'>3</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>concept_post</span><span class='tstring_end'>&#39;</span></span>
      <span class='int'>7</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>novation_post</span><span class='tstring_end'>&#39;</span></span>
      <span class='int'>9</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>plan_post</span><span class='tstring_end'>&#39;</span></span>
      <span class='int'>11</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>estimate_post</span><span class='tstring_end'>&#39;</span></span>
      <span class='int'>12</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>completion_proc_post</span><span class='tstring_end'>&#39;</span></span>
      <span class='int'>13</span>
    <span class='kw'>else</span>
      <span class='int'>0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="moderators-instance_method">
  
    - (<tt>Object</tt>) <strong>moderators</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 145</span>

<span class='kw'>def</span> <span class='id identifier rubyid_moderators'>moderators</span>
  <span class='id identifier rubyid_users_in_project'>users_in_project</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>users:</span> <span class='lbrace'>{</span><span class='label'>type_user:</span> <span class='const'>User</span><span class='op'>::</span><span class='const'>TYPES_USER</span><span class='lbracket'>[</span><span class='symbol'>:admin</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="next_status-instance_method">
  
    - (<tt>Object</tt>) <strong>next_status</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 254</span>

<span class='kw'>def</span> <span class='id identifier rubyid_next_status'>next_status</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>!=</span> <span class='int'>20</span>
    <span class='id identifier rubyid_status'>status</span> <span class='op'>+</span> <span class='int'>1</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prev_status-instance_method">
  
    - (<tt>Object</tt>) <strong>prev_status</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


244
245
246
247
248
249
250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 244</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prev_status'>prev_status</span>
  <span class='comment'># @todo здесь круто войдет https://github.com/pluginaweek/state_machine
</span>  <span class='comment'># займусь позже)
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_status'>status</span> <span class='op'>-</span> <span class='int'>1</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project_access-instance_method">
  
    - (<tt>Object</tt>) <strong>project_access</strong>(user) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190
191
192
193
194
195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 188</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project_access'>project_access</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_type_access'>type_access</span>
    <span class='kw'>when</span> <span class='int'>0</span>
      <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>when</span> <span class='int'>1</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_cluber?'>cluber?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_boss?'>boss?</span>
    <span class='kw'>when</span> <span class='int'>2</span>
      <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_boss?'>boss?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_date_for_stage-instance_method">
  
    - (<tt>Object</tt>) <strong>set_date_for_stage</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


403
404
405
406
407
408
409
410
411
412
413
414
415</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 403</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_date_for_stage'>set_date_for_stage</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>3</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='label'>date_12:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_utc'>utc</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>7</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='label'>date_23:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_utc'>utc</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>9</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='label'>date_34:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_utc'>utc</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>10</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='label'>date_45:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_utc'>utc</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>20</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='label'>date_56:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_utc'>utc</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_position_for_aspects-instance_method">
  
    - (<tt>Object</tt>) <strong>set_position_for_aspects</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


393
394
395
396
397
398
399
400
401</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 393</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_position_for_aspects'>set_position_for_aspects</span>
  <span class='id identifier rubyid_aspect'>aspect</span> <span class='op'>=</span> <span class='const'>Core</span><span class='op'>::</span><span class='const'>Aspect</span><span class='op'>::</span><span class='const'>Post</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>project_id:</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_aspect'>aspect</span><span class='period'>.</span><span class='id identifier rubyid_position'>position</span>
    <span class='id identifier rubyid_aspects'>aspects</span> <span class='op'>=</span> <span class='const'>Core</span><span class='op'>::</span><span class='const'>Aspect</span><span class='op'>::</span><span class='const'>Post</span><span class='period'>.</span><span class='id identifier rubyid_scope_vote_top'>scope_vote_top</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_aspects'>aspects</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_asp'>asp</span><span class='op'>|</span>
      <span class='id identifier rubyid_asp'>asp</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='label'>position:</span> <span class='id identifier rubyid_asp'>asp</span><span class='period'>.</span><span class='id identifier rubyid_voted_users'>voted_users</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stage1_count-instance_method">
  
    - (<tt>Object</tt>) <strong>stage1_count</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 169</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stage1_count'>stage1_count</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_stage1'>stage1</span> <span class='op'>&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_proc_aspects'>proc_aspects</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>?</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_proc_aspects'>proc_aspects</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_stage1'>stage1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stage_style-instance_method">
  
    - (<tt>Object</tt>) <strong>stage_style</strong>(status) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264
265</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stage_style'>stage_style</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_status_number'>status_number</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>active</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_status?'>current_status?</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stage_style_link-instance_method">
  
    - (<tt>Object</tt>) <strong>stage_style_link</strong>(name_page, status) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


267
268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 267</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stage_style_link'>stage_style_link</span><span class='lparen'>(</span><span class='id identifier rubyid_name_page'>name_page</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>disabled</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_status_number'>status_number</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>current</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_current_page?'>current_page?</span><span class='lparen'>(</span><span class='id identifier rubyid_name_page'>name_page</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="statistic_visits-instance_method">
  
    - (<tt>Object</tt>) <strong>statistic_visits</strong>(duration) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Аналитика</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


460
461
462</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 460</span>

<span class='kw'>def</span> <span class='id identifier rubyid_statistic_visits'>statistic_visits</span><span class='lparen'>(</span><span class='id identifier rubyid_duration'>duration</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_journals'>journals</span><span class='period'>.</span><span class='id identifier rubyid_unscoped'>unscoped</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>type_event:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>visit_save</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>project_id:</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>journals.created_at &gt; ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_duration'>duration</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status_number-instance_method">
  
    - (<tt>Object</tt>) <strong>status_number</strong>(status) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 291</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status_number'>status_number</span><span class='lparen'>(</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_status'>status</span>
    <span class='kw'>when</span> <span class='symbol'>:collect_info_posts</span>
      <span class='int'>0</span>
    <span class='kw'>when</span> <span class='symbol'>:discontent_posts</span>
      <span class='int'>3</span>
    <span class='kw'>when</span> <span class='symbol'>:concept_posts</span>
      <span class='int'>7</span>
    <span class='kw'>when</span> <span class='symbol'>:novation_posts</span>
      <span class='int'>9</span>
    <span class='kw'>when</span> <span class='symbol'>:plan_posts</span>
      <span class='int'>11</span>
    <span class='kw'>when</span> <span class='symbol'>:estimate_posts</span>
      <span class='int'>12</span>
    <span class='kw'>when</span> <span class='symbol'>:completion_proc_posts</span>
      <span class='int'>13</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="type_access_name-instance_method">
  
    - (<tt>Object</tt>) <strong>type_access_name</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 208</span>

<span class='kw'>def</span> <span class='id identifier rubyid_type_access_name'>type_access_name</span>
  <span class='const'>TYPE_ACCESS</span><span class='lbracket'>[</span><span class='id identifier rubyid_type_access'>type_access</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="type_for_questions-instance_method">
  
    - (<tt>Object</tt>) <strong>type_for_questions</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>тип вопроса в зависимости от этапа</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_type_for_questions'>type_for_questions</span>
  <span class='lbracket'>[</span><span class='const'>STATUS_CODES</span><span class='lbracket'>[</span><span class='symbol'>:prepare</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>STATUS_CODES</span><span class='lbracket'>[</span><span class='symbol'>:collect_info</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>:</span> <span class='const'>STATUS_CODES</span><span class='lbracket'>[</span><span class='symbol'>:collect_info</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uniq_proc?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>uniq_proc?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 204</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uniq_proc?'>uniq_proc?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_moderator_id'>moderator_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uniq_proc_access?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>uniq_proc_access?</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/core/project.rb', line 199</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uniq_proc_access?'>uniq_proc_access?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_moderator_id'>moderator_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_moderator_id'>moderator_id</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='kw'>or</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_type_user'>type_user</span> <span class='op'>==</span> <span class='int'>7</span><span class='rparen'>)</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Tue May 12 16:42:06 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.0).
</div>

  </body>
</html>